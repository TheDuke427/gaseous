name: Blinko
version: "1.0.0"
slug: blinko
description: "Blinko - AI-powered personal notes (runs via blinkospace/blinko docker image). Ingress-enabled."
arch:
  - amd64
  - armv7
  - arm64
startup: services
boot: auto
host_network: false

# Ingress configuration (the add-on must listen on the port below)
ingress: true
ingress_port: 1111

# Expose nothing to host (we use ingress)
ports: {}

# Option schema shown in the UI. User sets NEXTAUTH_SECRET, DATABASE_URL, etc.
options:
  NODE_ENV: "production"
  NEXTAUTH_URL: "http://homeassistant.local:8123"   # not strictly used via ingress, but keep for correctness
  NEXT_PUBLIC_BASE_URL: "http://homeassistant.local:8123"
  NEXTAUTH_SECRET: ""    # REQUIRED: user must set a strong secret before starting
  DATABASE_URL: "postgresql://postgres:password@<db-host>:5432/postgres"
  PUID: 1000
  PGID: 1000
  TZ: "UTC"
schema:
  NEXTAUTH_SECRET:
    type: string
  DATABASE_URL:
    type: string
  NEXT_PUBLIC_BASE_URL:
    type: string
  NODE_ENV:
    type: string
  PUID:
    type: integer
  PGID:
    type: integer
  TZ:
    type: string

map:
  # persist app data (optional)
  - map: config
    to: /app/.blinko
  # Provide a place for logs or other persistent state if needed
  - map: data
    to: /data

homeassistant_api: true

# Prevent the add-on from being exposed to the network; use Ingress instead
ports_description: {}
